<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SyncSpeaker ‚Äî Browser Prototype</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="top">
    <div class="brand">
      <div class="logo">SS</div>
      <div>
        <div class="title">SyncSpeaker</div>
        <div class="subtitle">Browser prototype (friend test)</div>
      </div>
    </div>
    <div class="pill" id="planPill">Free ¬∑ 2 phones</div>
  </header>

  <main class="wrap">
    <!-- Landing Page -->
    <section class="landing-page" id="viewLanding">
      <div class="landing-hero">
        <div class="dj-icon">
          <svg role="img" aria-label="DJ headphones and turntable icon" width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Headphones -->
            <path d="M40 15 C25 15, 15 25, 15 40 L15 50 C15 52, 17 54, 19 54 L25 54 C27 54, 29 52, 29 50 L29 40 C29 38, 27 36, 25 36 L21 36 C21 28, 28 21, 40 21 C52 21, 59 28, 59 36 L55 36 C53 36, 51 38, 51 40 L51 50 C51 52, 53 54, 55 54 L61 54 C63 54, 65 52, 65 50 L65 40 C65 25, 55 15, 40 15 Z" fill="url(#headphoneGradient)" stroke="url(#neonStroke)" stroke-width="2"/>
            <!-- Turntable -->
            <circle cx="40" cy="55" r="15" fill="url(#turntableGradient)" stroke="url(#neonStroke)" stroke-width="2"/>
            <circle cx="40" cy="55" r="3" fill="#5AA9FF"/>
            <defs>
              <linearGradient id="headphoneGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#5AA9FF;stop-opacity:0.6" />
                <stop offset="100%" style="stop-color:#8B7CFF;stop-opacity:0.8" />
              </linearGradient>
              <linearGradient id="turntableGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#8B7CFF;stop-opacity:0.6" />
                <stop offset="100%" style="stop-color:#5AA9FF;stop-opacity:0.8" />
              </linearGradient>
              <linearGradient id="neonStroke" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#5AA9FF" />
                <stop offset="100%" style="stop-color:#8B7CFF" />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <h1 class="landing-title">SyncSpeaker</h1>
        <p class="landing-subtitle">Turn your phones into one massive speaker</p>
        
        <!-- Equalizer Bars -->
        <div class="equalizer">
          <div class="eq-bar"></div>
          <div class="eq-bar"></div>
          <div class="eq-bar"></div>
          <div class="eq-bar"></div>
          <div class="eq-bar"></div>
        </div>
      </div>

      <!-- What is SyncSpeaker -->
      <div class="glass-card">
        <h2>üéµ What is SyncSpeaker?</h2>
        <p>Connect multiple phones together and play music in perfect sync. Create an epic sound experience for parties, gatherings, or just hanging out with friends!</p>
      </div>

      <!-- How it Works -->
      <div class="glass-card">
        <h2>‚ö° How it Works</h2>
        <div class="steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>Start a Party</h3>
              <p>One person becomes the host and gets a party code</p>
            </div>
          </div>
          <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>Friends Join</h3>
              <p>Share the code with friends to connect their phones</p>
            </div>
          </div>
          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>Play Together</h3>
              <p>Music plays in sync across all connected devices</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Important Info -->
      <div class="glass-card info-card">
        <div class="info-row">
          <span class="info-icon">üì∂</span>
          <p><strong>Hotspot or Wi-Fi recommended</strong> for best connection quality</p>
        </div>
        <div class="info-row">
          <span class="info-icon">üéß</span>
          <p><strong>You provide the music:</strong> This app syncs playback. Music comes from your device (Spotify, YouTube, etc.)</p>
        </div>
      </div>

      <!-- Pricing -->
      <div class="glass-card pricing-card">
        <h2>üíé Pricing</h2>
        <div class="pricing-grid pricing-grid-three">
          <div class="pricing-option">
            <div class="pricing-badge free">Free</div>
            <h3>Free Plan</h3>
            <p class="pricing-desc">Perfect for small groups</p>
            <ul class="pricing-features">
              <li>‚úì Up to 2 phones</li>
              <li>‚úì Basic features</li>
              <li>‚Ä¢ Includes ads</li>
            </ul>
          </div>
          <div class="pricing-option party-pass-featured">
            <div class="popular-badge">Most popular</div>
            <div class="pricing-badge party-pass">Party Pass</div>
            <h3>üéâ Party Pass</h3>
            <p class="pricing-subtitle">(One-Night Only)</p>
            <p class="pricing-price">¬£2.99</p>
            <p class="pricing-desc">Go Pro for tonight. No commitment.</p>
            <ul class="pricing-features">
              <li>‚úì No ads during playback</li>
              <li>‚úì Higher phone/speaker limit</li>
              <li>‚úì Pro DJ visuals &amp; effects</li>
              <li>‚úì Priority sync stability</li>
              <li>‚úì Party-wide unlock</li>
            </ul>
            <button class="btn-party-pass" id="btnActivatePartyPassLanding">Activate Party Pass</button>
            <p class="pricing-fine-print">Single-use ¬∑ Valid for one party ¬∑ Auto-expires after 2 hours</p>
          </div>
          <div class="pricing-option">
            <div class="pricing-badge pro">Pro</div>
            <h3>Pro Monthly</h3>
            <p class="pricing-price">¬£9.99/month</p>
            <p class="pricing-desc">Cancel anytime</p>
            <ul class="pricing-features">
              <li>‚úì 3+ phones (up to 10)</li>
              <li>‚úì No ads</li>
              <li>‚úì Quality override warnings</li>
              <li>‚úì Speaker support</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- CTA Buttons -->
      <div class="landing-cta">
        <button class="btn-landing primary-landing" id="btnLandingStart">
          üéâ Start Party
        </button>
        <button class="btn-landing secondary-landing" id="btnLandingJoin">
          üéµ Join Party
        </button>
      </div>

      <!-- Background Blobs -->
      <div class="blob blob-1"></div>
      <div class="blob blob-2"></div>
      <div class="blob blob-3"></div>
    </section>

    <section class="card hidden" id="viewHome">
      <h1>Play music together</h1>
      <p class="muted">
        Prototype to test the idea + flow. Audio sync in browsers varies by device ‚Äî focus on usability and ‚Äúwould you use this?‚Äù.
      </p>

      <!-- Mini Equalizer -->
      <div class="home-equalizer">
        <div class="home-eq-bar"></div>
        <div class="home-eq-bar"></div>
        <div class="home-eq-bar"></div>
        <div class="home-eq-bar"></div>
        <div class="home-eq-bar"></div>
      </div>

      <div class="grid2">
        <div class="box">
          <h3>Start a party (Host)</h3>
          <label class="lbl">Your name</label>
          <input id="hostName" class="input" value="Host" />
          
          <!-- Music from Phone Section -->
          <div class="music-section">
            <h4 class="music-section-title">üéµ Music (from your phone)</h4>
            <div class="music-controls">
              <input type="file" id="musicFileInput" accept="audio/*" style="display: none;" />
              <button type="button" class="btn secondary" id="btnChooseMusic">Choose music file</button>
              <button type="button" class="btn secondary hidden" id="btnChangeMusic">Change file</button>
            </div>
            <div class="music-info hidden" id="musicInfo">
              <div class="music-file-details">
                <span class="music-filename" id="musicFilename"></span>
                <span class="music-filesize" id="musicFilesize"></span>
                <span class="pill-enhanced music-status-ready" id="musicStatusReady">‚úì Ready</span>
              </div>
            </div>
            <div class="tiny muted music-helper">
              Pick any audio file from your phone (MP3, WAV, M4A, etc). We don't provide music.
            </div>
            <div class="music-warning hidden" id="musicWarning"></div>
          </div>

          <button type="button" class="btn primary" id="btnCreate">Start party</button>
          <div class="party-status hidden" id="partyStatus">
            <div class="status-message" id="createStatusMessage">Waiting...</div>
            <div class="debug-info tiny muted" id="createDebugInfo"></div>
          </div>
          <div class="tiny muted">
            Users are responsible for music source. This app does not provide music.
          </div>
        </div>

        <div class="box">
          <h3>Join a party (Friend)</h3>
          <label class="lbl">Party code</label>
          <input id="joinCode" class="input" placeholder="ABC123" />
          <label class="lbl">Your name</label>
          <input id="guestName" class="input" value="Guest" />
          <button class="btn" id="btnJoin">Join party</button>
          <div class="party-status hidden" id="joinStatus">
            <div class="status-message" id="joinStatusMessage">Waiting...</div>
            <div class="debug-info tiny muted" id="joinDebugInfo"></div>
          </div>
          <div class="tiny muted">Tip: open this on another phone on the same Wi‚ÄëFi.</div>
        </div>
      </div>

      <div class="line"></div>

      <div class="row">
        <label class="check">
          <input type="checkbox" id="togglePro" />
          <span><b>Support mode (Pro)</b> (party-wide unlock)</span>
        </label>
        <span class="tiny muted">Testing mode: simulates Pro subscription.</span>
      </div>
    </section>

    <section class="card hidden" id="viewParty">
      <div class="row space">
        <div>
          <h2 id="partyTitle">Party</h2>
          <div class="muted tiny" id="partyMeta"></div>
        </div>
        <button class="btn danger" id="btnLeave">Leave</button>
      </div>

      <!-- Party Pass Status/Upgrade Banner -->
      <div class="party-pass-banner hidden" id="partyPassBanner">
        <div class="party-pass-status hidden" id="partyPassActive">
          <div class="party-pass-icon">üéâ</div>
          <div class="party-pass-info">
            <div class="party-pass-title" id="partyPassTitle">Party Pass Active</div>
            <div class="party-pass-timer" id="partyPassTimer">5h 42m remaining</div>
            <div class="party-pass-desc hidden" id="partyPassDesc">Pro features unlocked for this party</div>
          </div>
        </div>
        <div class="party-pass-upgrade hidden" id="partyPassUpgrade">
          <div class="party-pass-upgrade-content">
            <div class="party-pass-upgrade-title">üéâ Upgrade this party ‚Äî ¬£2.99 ¬∑ 2 hours</div>
            <p class="party-pass-upgrade-tagline">Go Pro for tonight. No commitment.</p>
            <button class="btn-party-pass" id="btnActivatePartyPass">Activate Party Pass</button>
          </div>
        </div>
      </div>

      <div class="grid3">
        <div class="box">
          <div class="row space">
            <div>
              <div class="lbl">Party code</div>
              <div class="code" id="partyCode">------</div>
            </div>
            <button class="btn" id="btnCopy">Copy</button>
          </div>
          <div class="tiny muted">Share code with friends.</div>
        </div>

        <div class="box">
          <div class="row space">
            <div>
              <div class="lbl">Connection strength</div>
              <div class="row">
                <span class="badge" id="qualityTier">Good</span>
                <span class="tiny muted" id="qualityHint">Minor drift possible</span>
              </div>
            </div>
            <div class="right tiny muted"><span id="qualityScore">80</span>/100</div>
          </div>
          <div class="bar"><div class="fill" id="qualityFill" style="width:80%"></div></div>
          <div class="tiny muted" id="limitsLine">Recommended: 4 ¬∑ Hard cap: 8</div>
        </div>

        <div class="box">
          <div class="lbl">Playback</div>
          
          <!-- Audio Player -->
          <audio id="hostAudioPlayer" preload="auto"></audio>
          
          <!-- Status Area -->
          <div class="playback-status" id="playbackStatus">
            <span class="status-label">Status:</span>
            <span class="status-message" id="statusMessage">No music loaded</span>
          </div>
          
          <div class="row gap">
            <button class="btn primary" id="btnPlay">Play</button>
            <button class="btn" id="btnPause">Pause</button>
            <button class="btn" id="btnAd">Show ad (Free)</button>
          </div>
          <div class="tiny muted" id="adLine">Ads can pause music for free users.</div>
        </div>
      </div>

      <div class="line"></div>

      <div class="row space">
        <h3>Friends connected</h3>
        <div class="row gap">
          <button class="btn" id="btnAddPhone">Add another phone</button>
          <button class="btn" id="btnSpeaker">Use a speaker</button>
        </div>
      </div>

      <div id="members"></div>

      <div class="tiny muted" style="margin-top:10px">
        Browser prototype ‚Äî next step is the real Android app for proper sync.
      </div>
    </section>
  
<!-- Debug Panel (Prototype Only) -->
<div class="debug-panel" id="debugPanel" aria-hidden="true">
  <h4 class="debug-title">Debug Panel (Prototype)</h4>
  <div class="debug-row">
    <span class="debug-label">Last endpoint:</span>
    <span class="debug-value" id="debugEndpoint">None</span>
  </div>
  <div class="debug-row">
    <span class="debug-label">Last error:</span>
    <span class="debug-value" id="debugError">None</span>
  </div>
</div>

<!-- Promo Code -->
<button class="btn secondary" id="promoBtn">Have a promo code?</button>

<div class="modal hidden" id="promoModal">
  <div class="modal-card">
    <h3>Enter promo code</h3>
    <input id="promoInput" placeholder="Promo code" />
    <button class="btn primary" id="promoApply">Unlock this party</button>
    <p class="hint">Promo codes unlock Pro for one party only.</p>
    <button class="btn link" id="promoClose">Cancel</button>
  </div>
</div>

</main>

  <div class="modal hidden" id="modalPaywall">
    <div class="modalCard">
      <h3>Support SyncSpeaker</h3>
      <p class="muted">Support removes ads, allows 3+ phones, and lets you add more phones when you choose.</p>
      <ul class="list">
        <li>No ads</li>
        <li>3+ phones</li>
        <li>Connection strength override warning + accept</li>
        <li>Speaker support</li>
      </ul>
      <div class="row gap">
        <button class="btn primary" id="btnProYes">Support mode (Pro)</button>
        <button class="btn" id="btnProNo">Not now</button>
      </div>
      <div class="tiny muted">Subscription only. Cancel anytime.</div>
    </div>
  </div>

  <div class="modal hidden" id="modalWarn">
    <div class="modalCard">
      <h3>Heads up</h3>
      <p class="muted" id="warnText"></p>
      <div class="row gap">
        <button class="btn" id="btnWarnCancel">Cancel</button>
        <button class="btn primary" id="btnWarnAnyway">Add anyway</button>
      </div>
      <div class="tiny muted">This option is for supporters.</div>
    </div>
  </div>

  <div class="modal hidden" id="modalSpeaker">
    <div class="modalCard">
      <h3>Connect to a speaker</h3>
      <p class="muted">
        Connect a Bluetooth or AUX speaker to the host phone for louder sound. (Real app will handle delay better.)
      </p>
      <div class="row gap">
        <button class="btn primary" id="btnSpeakerOk">Got it</button>
      </div>
      <div class="tiny muted">Speaker support is for supporters.</div>
    </div>
  </div>

  <div class="toast hidden" id="toast"></div>

  <script src="app.js"></script>
</body>
</html>
