# Phone Party Server Configuration

# Server Port
PORT=8080

# Redis Configuration (REQUIRED for production)
# For Railway/production deployment, use REDIS_URL (automatically set by Railway Redis plugin)
# REDIS_URL=redis://default:password@host:port
# REDIS_URL=rediss://default:password@host:port  # Use rediss:// for TLS/SSL connections

# For local development, use individual Redis settings (defaults to localhost:6379)
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=your-password-here  # Uncomment if using password auth

# Redis TLS Certificate Verification (optional, default: false)
# Set to 'true' to enable strict TLS certificate verification
# Default is 'false' to work with Railway and managed services that use self-signed certs
# REDIS_TLS_REJECT_UNAUTHORIZED=false

# PostgreSQL Configuration (for user data, subscriptions, purchases)
# For Railway/production deployment, use DATABASE_URL (automatically set by Railway Postgres plugin)
# DATABASE_URL=postgresql://user:password@host:port/database
DATABASE_URL=postgresql://localhost:5432/phoneparty

# For local development, use individual PostgreSQL settings
DB_HOST=localhost
DB_PORT=5432
DB_NAME=phoneparty
DB_USER=postgres
# DB_PASSWORD=your-password-here  # Uncomment if using password auth

# Notes:
# - In production (Railway): REDIS_URL is REQUIRED and set automatically by the Redis plugin
#   - Railway Redis uses TLS, so URL will be rediss:// (note the double 's')
#   - TLS is automatically configured when rediss:// URL is detected
#   - Certificate verification is disabled by default for Railway compatibility
#   - Set REDIS_TLS_REJECT_UNAUTHORIZED=true for strict certificate validation
# - In development: REDIS_HOST defaults to localhost:6379 with no password
# - If Redis is not configured, the server will log a warning and use fallback storage
# - The /health and /api/health endpoints show Redis connection status
# - Check server logs for detailed Redis connection diagnostics
# - PostgreSQL is used for persistent user data, subscriptions, and purchase history
# - See db/README.md for database schema setup instructions
